<%- include('partials/header', { title: product.name }) %>

<div class="row">
  <div class="col-md-6">
    <img src="<%= product.image %>" class="img-fluid rounded shadow-sm" alt="<%= product.name %>">
  </div>
  <div class="col-md-6">
    <h2 class="fw-bold"><%= product.name %></h2>
    <p class="text-muted small mb-2"><%= product.category %></p>
    <h3 class="text-success">$<%= product.price %></h3>
    <p class="mt-3"><%= product.description %></p>

    <form method="post" action="/orders/create" class="mt-4">
      <input type="hidden" name="productId" value="<%= product.id %>">
      <div class="mb-2">
        <label class="form-label">User</label>
        <select name="userId" class="form-select" required>
          <% 
            const users = require('../../services/json.service').read('users');
            users.forEach(u => { %>
            <option value="<%= u.id %%>"><%= u.name %> - <%= u.email %></option>
          <% }) %>
        </select>
      </div>
      <div class="mb-2">
        <label class="form-label">Quantity</label>
        <input type="number" name="quantity" value="1" min="1" class="form-control" required>
      </div>
      <button class="btn btn-primary">Place Order</button>
    </form>
  </div>
</div>

<%- include('partials/footer') %>
